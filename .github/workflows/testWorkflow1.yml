# This is a basic workflow that is manually triggered





name: CRABServer deployment

on:
  workflow_dispatch:
    inputs:
      tag:
        description: 'CRABServer tag to deploy:'
        required: true
      hostName:
        description: 'Host where given tag should be deployed:'
        required: true   
        default: preprod

jobs:
  greet:
    runs-on: ubuntu-latest

    steps:
    - name: Invoke crabserver deployment
      uses: distributhor/workflow-webhook@v1
      env:
        webhook_url: ${{ secrets.WEBHOOK_URL }}
        webhook_secret: ${{ secrets.WEBHOOK_SECRET }}
        data: '{ "weapon": ${{ github.event.inputs.hostName }}, "drink" : ${{ github.event.inputs.tag }} }'    
      #uses: joelwmale/webhook-action@master
      #with:
      #  url: ${{ secrets.WEBHOOK_URL }}
      #  headers: '{"repository": "ddaina/crabserver"}'
      #  body: '{"event": "deployment", "repository": "ddaina/crabserver"}'  
        
    
    

        
        
